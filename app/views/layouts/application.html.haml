-#--
-# Copyright (C) 2013  Colin J. Fuller
-#
-# This program is free software: you can redistribute it and/or modify
-# it under the terms of the GNU Affero General Public License as published by
-# the Free Software Foundation, either version 3 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU Affero General Public License for more details.
-#
-# You should have received a copy of the GNU Affero General Public License
-# along with this program.  If not, see <http://www.gnu.org/licenses/>.
-#++

!!!
%html
  %head
    %meta{name: "google-signin-client_id",
          content: "146923434465-alq7iagpanjvoag20smuirj0ivdtfldk.apps.googleusercontent.com"}
    %script{src: "https://apis.google.com/js/platform.js", async: true, defer: true}
    %title= ApplicationController::DATABASE_SYSTEM_NAME
    %link{rel: "stylesheet", type: "text/css", href: "//fonts.googleapis.com/css?family=Montserrat:400"}
    %link{rel: "stylesheet", type: "text/css", href: "//fonts.googleapis.com/css?family=Rokkitt:400"}
    %link{rel: "stylesheet", type: "text/css", href: "//fonts.googleapis.com/css?family=Source+Code+Pro"}
    %link{rel: "stylesheet", type: "text/css", href: "//fonts.googleapis.com/icon?family=Material+Icons"}
    %link{rel: "stylesheet", type: "text/css", href: "//fonts.googleapis.com/icon?family=Lato:400,700"}
    %link{rel: "stylesheet", type: "text/css", href: "/_s/plasmid-map.css"}
    = csrf_meta_tags
    :css
      .auto-link {
        text-decoration: none;
        color: #007799;
      }
      .auto-link:hover {
        color: #009977;
        text-decoration: underline;
      }
      #ssIFrame_google {
        top: -10px;
      }

  %body{style: "margin: 0;"}
    %div#body
    .container
    %script{type: "text/javascript"}
      = "window._labdbPrefetch = #{@content_json};".html_safe
      = "window._labdbUser = '#{@user_name || ""}';".html_safe
      = "window._labdbAuth = '#{@user_auth || ""}';".html_safe
      = "window._labdbSearchResults = #{@search_results};".html_safe
    - if @login_page
      %div#landing
      %script{type: "text/javascript"}
        = "window._labdbName = '#{@labdb_name}';".html_safe
    - if @production
      %script{src: "https://storage.googleapis.com/labdb-static/app_#{@js_version}.js"}
    - else
      %script{src: "/_s/app_#{@js_version}.js", type: "text/javascript"}
